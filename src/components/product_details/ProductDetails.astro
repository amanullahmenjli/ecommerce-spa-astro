---
import ClientsInfo from './ClientsInfoInput.astro'
import ProductSizes from './ProductSizes'
import Quantity from './Quantity.astro'
import { Button } from '@nextui-org/react'
import ImageGallery from './ImageGallery'
const { image, name, description, link, data } = Astro.props

let hasBonus = true;

if (name.includes("Oreiller") || name.includes('mousse')) {
  hasBonus = false;
}

---

<!-- Product Details Card -->
<div class="flex flex-row flex-wrap w-full px-2 gap-[32px] justify-center items-start">
  <!-- The Product Picture -->
  

  <ImageGallery client:only="react" image={image} namee={name}></ImageGallery>


  <!-- * Product Details -->
  <!-- * Column Layout -->
  <div class="flex flex-col gap-[16px] mt-5 p-[32px]">
    <!-- * Product Name -->
    <h1 class="text-xl font-semibold text-black">{ name }</h1>

    <!-- * Product Description -->
    <div class="font-normal text-sm max-w-[65ch]  text-[#848484]">
      {description}  
    </div>

    <!-- * Form -->

    <form action="https://formsubmit.co/venisematelas@gmail.com" method="POST" class="flex flex-col gap-[16px]" onsubmit="
    document.getElementById('_subject').value = 'Nouvelle commande #' + Date.now().toString() + ' par ' + document.getElementById('tel').value;
    alert(document.getElementById('_subject').value)
    ">
      <!-- * Form Settings -->
        <!-- * Use Table email template -->
        <input type="hidden" name="_template" value="table">
        <!-- * Desable Captcha -->
        <input type="hidden" name="_captcha" value="false">

        <input type="hidden" name="_subject" id="_subject" value="Nouvelle commande">

        <input type="hidden" name="Produit" value={name}>





      <!-- * Product Size -->
      <div>
        <h2 class="font-semibold text-black">Choisir une Option:</h2>
        <ProductSizes client:load data={data}></ProductSizes>
      </div>

      <!-- * Client Info -->
      <div>
        <h2 class="font-semibold text-black">Insérez votre Informations:</h2>
        <ClientsInfo />
      </div>

      <!-- * Bottom Row -->
      <div class="flex flex-row flex-wrap align-text-bottom items-center gap-3">
        <!-- * Prices -->
        <div class="flex flex-row flex-wrap align-text-bottom items-baseline gap-3">
          <!-- * Current Price -->
          <p class="font-bold text-[26px] md:text-[36px] text-[#E60D54]" id="final_price">
            {data[0].price} DT
          </p>

          <!-- * Old Price -->
          <p class="font-bold  text-[19px] md:text-[26px]  text-[#7F7F7F] line-through" id="old_price">
            {parseInt(data[0].price) * 2 + ' DT'}
          </p>
        </div>

        <!-- * Quantity -->
        <Quantity></Quantity>

        <!-- * Submit Button -->
        <div class="my-auto row-auto">
          <Button color='primary' size='lg' radius='sm' client:load>
            <input type="submit" value="J'Achète">
          </Button>
        </div>

      </div>
      
      <input type="hidden" name="" id="initial_price" value={data[0].price}>
      

    </form>


  </div>



<script>
  function setSubject() {
    document.getElementById('_subject').value = 'Nouvelle commande #' + Date.now().toString + ' par ' + document.getElementById('num').value;
    alert(document.getElementById('_subject').value)
    return false
  }
</script>